(()=>{"use strict";var t={56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},72:t=>{var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var r={},a=[],o=0;o<t.length;o++){var c=t[o],l=i.base?c[0]+i.base:c[0],d=r[l]||0,h="".concat(l," ").concat(d);r[l]=d+1;var u=n(h),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==u)e[u].references++,e[u].updater(p);else{var f=s(p,i);i.byIndex=o,e.splice(o,0,{identifier:h,updater:f,references:1})}a.push(h)}return a}function s(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,s){var r=i(t=t||[],s=s||{});return function(t){t=t||[];for(var a=0;a<r.length;a++){var o=n(r[a]);e[o].references--}for(var c=i(t,s),l=0;l<r.length;l++){var d=n(r[l]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}r=c}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},208:(t,e,n)=>{n.d(e,{A:()=>o});var i=n(601),s=n.n(i),r=n(314),a=n.n(r)()(s());a.push([t.id,":root {\n  box-sizing: border-box;\n  font-family: sans-serif;\n  font-size: 16px;\n}\n\n*,\n::before,\n::after {\n  box-sizing: inherit;\n}\n\nbody {\n  margin: 0;\n}\n\nh1,\nh2 {\n  text-align: center;\n}\n\nbutton {\n  display: block;\n  margin: 0 auto;\n  margin-top: 1rem;\n  font-family: inherit;\n  font-size: inherit;\n}\n\n.display {\n  --cell-size: 3.5rem;\n\n  display: flex;\n  justify-content: center;\n  gap: var(--cell-size);\n\n  & .board {\n    width: fit-content;\n    border: 1px solid;\n    display: grid;\n    grid-template-columns: repeat(10, var(--cell-size));\n    grid-template-rows: repeat(10, var(--cell-size));\n\n    & .cell {\n      border: 1px solid;\n\n      &.ship {\n        background-color: green;\n      }\n\n      &.disabled {\n        background-color: lightgray;\n      }\n\n      &.hit {\n        &::after {\n          content: 'â€¢';\n          position: relative;\n          height: 100%;\n          font-size: 2rem;\n          line-height: 0;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n        }\n\n        &.ship {\n          background-color: red;\n        }\n      }\n    }\n  }\n}\n",""]);const o=a},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n}).join("")},e.i=function(t,n,i,s,r){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(i)for(var o=0;o<this.length;o++){var c=this[o][0];null!=c&&(a[c]=!0)}for(var l=0;l<t.length;l++){var d=[].concat(t[l]);i&&a[d[0]]||(void 0!==r&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=r),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),s&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=s):d[4]="".concat(s)),e.push(d))}},e}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},601:t=>{t.exports=function(t){return t[1]}},659:t=>{var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,s&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var r=e[i]={id:i,exports:{}};return t[i](r,r.exports,n),r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0;var i=n(72),s=n.n(i),r=n(825),a=n.n(r),o=n(659),c=n.n(o),l=n(56),d=n.n(l),h=n(540),u=n.n(h),p=n(113),f=n.n(p),m=n(208),g={};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=c().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=u(),s()(m.A,g),m.A&&m.A.locals&&m.A.locals;const b=10;class v{#t;#e;coordinates;orientation;constructor(t){if(!this.#n(t))throw new Error("Invalid length");this.#t=t,this.#e=0,this.coordinates=[],this.orientation=null}get length(){return this.#t}get hits(){return this.#e}hit(){++this.#e}isSunk(){return this.#e>=this.#t}#n(t){return"number"==typeof t&&Number.isInteger(t)&&t>=1&&t<=4}}class y{#i;#s;constructor(){this.#i=Array.from({length:b},()=>Array.from({length:b},()=>new w)),this.#s=[]}at(t,e){if(!this.#r([t,e]))throw new Error("Position is invalid");return this.#i[t][e]}placeShipsRandomly(){const t=[];for(let e=1;e<=4;++e)for(let n=4;n>=e;--n)t.push(new v(e));for(const e of t)for(;;)try{const t=[Math.floor(Math.random()*b),Math.floor(Math.random()*b)],n=Math.random()<.5?"x":"y";this.placeShip(e,t,n);break}catch{continue}}placeShip(t,e,n){if(!(t instanceof v))throw new Error("Ship is invalid");if(!this.#r(e))throw new Error("Position is invalid");if("x"!==n&&"y"!==n)throw new Error("Orientation is invalid");const i=[...e],s="x"===n?0:1;i[s]=Math.min(i[s],b-t.length);const r=[];for(let e=0;e<t.length;++e)r.push([...i]),++i[s];if(!this.#a(r))throw new Error("Position is already taken");t.coordinates=r,t.orientation=n;for(const[e,n]of r)this.#i[e][n].placeShip(t);this.#s.push(t)}receiveAttack(t,e){if(!this.#r([t,e]))throw new Error("Position is invalid");this.#i[t][e].hit()}isEveryShipSunk(){return this.#s.every(t=>t.isSunk())}#r([t,e]){return"number"==typeof t&&"number"==typeof e&&Number.isInteger(t)&&Number.isInteger(e)&&t>=0&&e>=0&&t<b&&e<b}#a(t){const e=t.length-1,n=t[0][0],i=t[e][0],s=t[0][1],r=t[e][1];for(let t=n-1;t<=i+1;++t)if(!(t<0||t>=b))for(let e=s-1;e<=r+1;++e)if(!(e<0||e>=b)&&this.#i[t][e].ship)return!1;return!0}}class w{#o;#c;constructor(){this.#o=null,this.#c=!1}get ship(){return this.#o}get isHit(){return this.#c}placeShip(t){this.#o=t}hit(){this.#c||(this.#c=!0,this.#o&&this.#o.hit())}}class S{#l;constructor(){this.#l=new y}get gameBoard(){return this.#l}}class k{static container=document.querySelector(".player .board");static cells=new Map;static board;static init(t){this.board=t.gameBoard;for(let t=0;t<b;++t)for(let e=0;e<b;++e){const n=document.createElement("div");n.className="cell",n.dataset.pos=`[${e},${t}]`,this.container.appendChild(n),this.cells.set(`${e},${t}`,n),this.board.at(e,t).ship&&n.classList.add("ship")}}}class x{static container=document.querySelector(".enemy .board");static cells=new Map;static attackListeners=new Set;static board;static init(t){for(let t=0;t<b;++t)for(let e=0;e<b;++e){const n=document.createElement("div");n.className="cell",n.dataset.pos=`[${e},${t}]`,this.container.appendChild(n),this.cells.set(`${e},${t}`,n)}this.board=t.gameBoard,this.enable()}static enable(){this.container.addEventListener("click",this.#d)}static disable(){this.container.removeEventListener("click",this.#d)}static onAttack(t){this.attackListeners.add(t)}static#d=t=>{const e=t.target;if(!e.classList.contains("cell")||e.classList.contains("disabled"))return;this.disable();const[n,i]=JSON.parse(e.dataset.pos);this.board.receiveAttack(n,i),e.classList.add("hit","disabled");const{ship:s}=this.board.at(n,i);if(s)return e.classList.add("ship"),1===s.length?this.#h(n,i):(this.#u(n,i),s.isSunk()&&this.#p(s)),void(this.board.isEveryShipSunk()?setTimeout(()=>alert("You win!"),100):this.enable());let r;for(const t of this.attackListeners)r||=t();r||this.enable()};static#h(t,e){for(let n=-1;n<=1;++n)for(let i=-1;i<=1;++i){if(0===n&&0===i)continue;const s=this.cells.get(`${t+i},${e+n}`);s&&s.classList.add("disabled")}}static#u(t,e){for(let n=-1;n<=1;n+=2)for(let i=-1;i<=1;i+=2){const s=this.cells.get(`${t+i},${e+n}`);s&&s.classList.add("disabled")}}static#p(t){let[e,n]=t.coordinates[0],[i,s]=t.coordinates.at(-1);"x"===t.orientation?(--e,++i):(--n,++s);const r=this.cells.get(`${e},${n}`),a=this.cells.get(`${i},${s}`);r&&r.classList.add("disabled"),a&&a.classList.add("disabled")}}document.querySelector("button").onclick=()=>window.location.reload();const E=new S,L=new S;E.gameBoard.placeShipsRandomly(),L.gameBoard.placeShipsRandomly(),k.init(E),x.init(L),x.onAttack(()=>{for(;;){const[t,e]=[Math.floor(Math.random()*b),Math.floor(Math.random()*b)],n=k.cells.get(`${t},${e}`);if(!n.classList.contains("disabled")){if(E.gameBoard.receiveAttack(t,e),n.classList.add("hit","disabled"),!E.gameBoard.at(t,e).ship)break;if(E.gameBoard.isEveryShipSunk())return setTimeout(()=>alert("You lose!"),100),!0}}})})();